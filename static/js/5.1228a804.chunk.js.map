{"version":3,"sources":["unauthenticated-app/register.tsx","unauthenticated-app/login.tsx","assets/left.svg","assets/right.svg","assets/logo.svg","unauthenticated-app/index.tsx"],"names":["Register","onError","register","useAuth","useAsync","undefined","throwOnError","run","isLoading","handleSubmit","a","c_password","values","password","Error","onFinish","Item","name","rules","required","message","type","id","placeholder","LongButton","loading","htmlType","Login","login","label","useState","isRegister","setIsRegister","error","setError","useDocumentTitle","Container","Header","Background","ShadowCard","Title","onClick","styled","Button","h2","div","left","right","header","logo","Card"],"mappings":"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","file":"static/js/5.1228a804.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {useAuth} from \"../context/auth-context\";\r\nimport { Form, Input} from \"antd\";\r\nimport {LongButton} from \"./index\";\r\nimport {useAsync} from \"../utils/use-async\";\r\n\r\nexport const Register=({onError}:{onError:(error:Error)=>void})=>{\r\n\r\n    const {register}=useAuth()\r\n    const {run,isLoading}=useAsync(undefined,{throwOnError: true})\r\n\r\n    const handleSubmit=async ({c_password,...values}: {username:string,password:string,c_password:string})=>{\r\n        if (c_password!==values.password){\r\n            onError(new Error('两次输入密码不一致，请重新输入！'))\r\n            return\r\n        }\r\n        try {\r\n            await run(register(values))\r\n       }catch (e) {\r\n            onError(e)\r\n       }\r\n    }\r\n\r\n    return  (<Form onFinish={handleSubmit}>\r\n        <Form.Item  name={'username'} rules={[{required:true,message: 'Please input your username!' }]}>\r\n            <Input type=\"text\" id={'username'} placeholder={'账号'}/>\r\n        </Form.Item>\r\n        <Form.Item  name={'password'} rules={[{required:true,message: 'Please input your password!' }]}>\r\n            <Input  type=\"password\" id={'password'} placeholder={'密码'}/>\r\n        </Form.Item>\r\n        <Form.Item  name={'c_password'} rules={[{required:true,message: 'Please confirm your password!' }]}>\r\n            <Input  type=\"password\" id={'c_password'} placeholder={'确认密码'}/>\r\n        </Form.Item>\r\n        <Form.Item>\r\n            <LongButton loading={isLoading} type={'primary'} htmlType={'submit'}>注册</LongButton>\r\n        </Form.Item>\r\n    </Form>)\r\n}\r\n","import React from \"react\";\r\nimport {Form, Input} from \"antd\";\r\nimport {useAuth} from \"context/auth-context\";\r\nimport {LongButton} from \"./index\";\r\nimport {useAsync} from \"../utils/use-async\";\r\n\r\nexport const Login=({onError}:{onError:(error:Error)=>void})=>{\r\n\r\n    const {login}=useAuth()\r\n    const {run,isLoading}=useAsync(undefined,{throwOnError: true})\r\n    const handleSubmit=async (values:{username:string,password:string})=>{\r\n        try {\r\n         await run(login(values))\r\n        }catch (e) {\r\n          onError(e)\r\n        }\r\n    }\r\n\r\n    return (<Form onFinish={handleSubmit}>\r\n        <Form.Item label={'账号'} name={'username'} rules={[{required:true,message: 'Please input your username!' }]}>\r\n            <Input type=\"text\" id={'username'} placeholder={'账号'}/>\r\n        </Form.Item>\r\n        <Form.Item label={'密码:'} name={'password'} rules={[{required:true,message: 'Please input your password!' }]}>\r\n            <Input type=\"password\" id={'password'} placeholder={'密码'}/>\r\n        </Form.Item>\r\n        <Form.Item>\r\n            <LongButton type={'primary'} htmlType={'submit'} loading={isLoading}>登录</LongButton>\r\n        </Form.Item>\r\n    </Form>)\r\n}\r\n","export default __webpack_public_path__ + \"static/media/left.e74de3ec.svg\";","export default __webpack_public_path__ + \"static/media/right.890da620.svg\";","export default __webpack_public_path__ + \"static/media/logo.8bb06c97.svg\";","import React, {useState} from \"react\";\r\nimport {Button, Card, Divider} from \"antd\";\r\nimport styled from '@emotion/styled'\r\n// import {Helmet} from 'react-helmet' 引入库设置title\r\n\r\nimport {Register} from \"./register\";\r\nimport {Login} from \"./login\";\r\n\r\nimport left from 'assets/left.svg'\r\nimport right from 'assets/right.svg'\r\nimport logo from 'assets/logo.svg'\r\nimport {useDocumentTitle} from \"utils\";\r\nimport {ErrorBox} from \"../components/lib\";\r\n\r\nexport default  ()=>{\r\n    const [isRegister,setIsRegister]=useState(false)\r\n    const [error,setError]=useState<null|Error>(null)\r\n    useDocumentTitle('登录或注册界面')\r\n\r\n    return <Container>\r\n        {/*<Helmet>*/}\r\n        {/*    <title>请登录或注册</title>*/}\r\n        {/*</Helmet>*/}\r\n        <Header />\r\n        <Background/>\r\n            <ShadowCard>\r\n                <Title>{isRegister?'请注册':'请登录'}</Title>\r\n                <ErrorBox error={error}/>\r\n                {isRegister?<Register onError={setError}/>:<Login onError={setError}/>}\r\n                <Divider/>\r\n                <Button type={\"link\"} onClick={()=>setIsRegister(!isRegister)}>切换到{isRegister?'已经有账号了？直接登录':'没有账号？注册新账号'}</Button>\r\n            </ShadowCard>\r\n    </Container>\r\n}\r\n\r\nexport const LongButton=styled(Button)`\r\nwidth: 100%;\r\n`\r\n\r\nconst Title=styled.h2`\r\nmargin-bottom: 2.4rem;\r\ncolor: rgb(94,108,132);\r\n`\r\n\r\n\r\nconst Background =styled.div`\r\nposition: absolute;\r\nwidth: 100%;\r\nheight: 100%;\r\nbackground-repeat:no-repeat ;\r\nbackground-attachment:fixed ;\r\nbackground-position:left bottom,right bottom;\r\nbackground-size: calc(((100vw - 40rem)/2) ),calc(((100vw - 40rem)/2)),cover;\r\nbackground-image: url(${left}),url(${right});\r\n`\r\n\r\nconst Header=styled.header`\r\nbackground: url(${logo}) no-repeat center;\r\npadding: 5rem 0;\r\nbackground-size: 8rem;\r\nwidth: 100%;\r\n`\r\n\r\nconst Container=styled.div`\r\ndisplay:flex;\r\nflex-direction:column;//div里面的元素垂直排列，一行一个样\r\nalign-items: center;\r\nmin-height: 100vh;\r\n`\r\nconst ShadowCard =styled(Card)`\r\nwidth: 40rem;\r\n//min-height: 56rem ;\r\npadding: 3.2rem 4rem;\r\nborder-radius: 0.3rem;\r\nbox-sizing: border-box;\r\nbox-shadow: rgba(0,0,0,0.1) 0 0 10px;\r\ntext-align: center;\r\n`"],"sourceRoot":""}